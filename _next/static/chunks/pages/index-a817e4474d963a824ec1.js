(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{2562:function(t,e,n){"use strict";n.r(e);var i=n(5861),a=n(5671),r=n(7757),h=n.n(r),o=n(7294),c=n(5258),s=n(3642),u=n(4775),l=n(4456),d=n(1959),g=n(7239),f=n(2516),w=n(6869),v=n(4849),m=n(8884),x=n(2576),p=n(6479),y=n(7812),j=n(8358),Z=n(6447),b=n(2318),_=n(5805),S=n(2766),k=n(3907),I=n(5893);function D(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,h=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return h=t.done,t},e:function(t){o=!0,r=t},f:function(){try{h||null==n.return||n.return()}finally{if(o)throw r}}}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var T=function t(e,n,i,r,h,o){(0,a.Z)(this,t),this.cls=e,this.score=n,this.x=i,this.y=r,this.width=h,this.height=o};e.default=function(){var t=(0,o.useState)(!1),e=t[0],n=t[1],a=(0,o.useState)(null),r=a[0],C=a[1],E=(0,o.useState)("brush"),P=E[0],R=E[1],A=(0,o.useState)(!0),F=A[0],M=(A[1],(0,o.useState)(!1)),B=M[0],X=M[1],N=(0,o.useState)("architecture"),O=N[0],U=(N[1],(0,o.useState)("500x500")),Y=U[0],L=U[1],W=(0,o.useState)(!1),Q=W[0],$=W[1],q=(0,o.useState)(),z=q[0],G=q[1],H=(0,o.useState)(),J=H[0],K=H[1],V=(0,o.useState)(),tt=V[0],et=V[1],nt=(0,o.useState)(),it=nt[0],at=nt[1],rt=(0,o.useState)(),ht=rt[0],ot=rt[1],ct=(0,o.useState)(),st=ct[0],ut=ct[1],lt=(0,o.useState)([]),dt=lt[0],gt=lt[1],ft=(0,o.useState)(),wt=ft[0],vt=ft[1],mt=(0,o.useState)({x:0,y:0}),xt=(mt[0],mt[1]),pt=(0,o.useState)({x:0,y:0}),yt=pt[0],jt=pt[1],Zt=(0,o.useState)([]),bt=Zt[0],_t=Zt[1],St={1:{name:"user",width:100,height:100,path:"images/user.svg"},2:{name:"server",width:100,height:100,path:"images/server.svg"},3:{name:"database",width:100,height:100,path:"images/database.svg"},4:{name:"laptop",width:100,height:100,path:"images/laptop.svg"},5:{name:"mobile",width:100,height:100,path:"images/mobile.svg"},6:{name:"cloud",width:100,height:100,path:"images/cloud.svg"},7:{name:"file",width:100,height:100,path:"images/file.svg"},8:{name:"directory",width:100,height:100,path:"images/directory.svg"},9:{name:"arrow_right",width:100,height:100,path:"images/arrow_right.svg"},10:{name:"arrow_left",width:100,height:100,path:"images/arrow_left.svg"},11:{name:"arrow_up",width:100,height:100,path:"images/arrow_up.svg"},12:{name:"arrow_down",width:100,height:100,path:"images/arrow_down.svg"},13:{name:"arrow_right_up",width:100,height:100,path:"images/arrow_right_up.svg"},14:{name:"arrow_right_down",width:100,height:100,path:"images/arrow_right_down.svg"},15:{name:"arrow_left_up",width:100,height:100,path:"images/arrow_left_up.svg"},16:{name:"arrow_left_down",width:100,height:100,path:"images/arrow_left_down.svg"},17:{name:"text"},18:{name:"banana",width:100,height:100,path:"images/banana.svg"}};(0,o.useEffect)((function(){if(!e){console.log("constructor");try{var t=document.getElementById("canvas"),i=document.createElement("canvas"),a=document.getElementById("canvas2"),r=[t.width,t.height];i.width=r[0],i.height=r[1],G(t),K(i),et(a);var h=t.getContext("2d");h&&at(h);var o=i.getContext("2d");o&&ot(o);var c=a.getContext("2d");c&&ut(c),Mt(t,i,h,o),_.CQI("webgl");var s=kt(O);(0,S.YL)(s).then((function(t){return vt(t)})),n(!0)}catch(u){console.log(u)}}}));var kt=function(t){return"tfjs_models/arc_model/model.json"},It=function(t,e){var n=e[t]?e[t]:null;return n&&n.path?n.path:""},Dt=function(t,e){if(it&&ht&&J){$(!0),"brush"===P?(ht.strokeStyle="black",ht.lineWidth=1):"eraser"===P&&(ht.strokeStyle="white",ht.lineWidth=20);var n=Et(t,e);xt(n),jt(n),dt.push(ht.getImageData(0,0,J.width,J.height)),dt.length>20&&dt.shift()}},Ct=function(t,e){if(Q){if(!ht||!it||!z)return;var n=Et(t,e);ht.beginPath(),ht.moveTo(yt.x,yt.y),ht.lineTo(n.x,n.y),ht.stroke(),it.putImageData(ht.getImageData(0,0,z.width,z.height),0,0),jt(n)}},Tt=function(){$(!1),Pt()},Et=function(t,e){var n={x:0,y:0};return z&&(n={x:t-z.getBoundingClientRect().left,y:e-z.getBoundingClientRect().top}),n},Pt=function(){var t=(0,i.Z)(h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(F){t.next=2;break}return t.abrupt("return");case 2:if(z&&(z.style.cursor="wait"),_t([]),"architecture"!=O){t.next=11;break}return t.next=7,Rt(2,1,7);case 7:e=t.sent,At(e,St),Ft(e,St),_t(e);case 11:z&&(z.style.cursor="auto");case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Rt=function(){var t=(0,i.Z)(h().mark((function t(e,n,i){var a,r,o,c,s,u,l;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(z&&wt){t.next=2;break}return t.abrupt("return",[]);case 2:return a=_.Xhn.fromPixels(z),r=a.toInt().transpose([0,1,2]).expandDims(),t.next=6,wt.executeAsync(r);case 6:return o=t.sent,Array.isArray(o)||(o=[o]),c=o[e].arraySync(),s=o[n].arraySync(),u=o[i].dataSync(),l=[],s[0].forEach((function(t,e){if(t>.5){var n=c[0][e][0]*z.height,i=c[0][e][1]*z.width,a=c[0][e][2]*z.height,r=c[0][e][3]*z.width;l.push(new T(u[e],t.toFixed(4),i,n,r-i,a-n))}})),t.abrupt("return",l);case 14:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),At=function(t,e){if(B&&it){it.strokeStyle="#00FF00",it.font="21px serif",it.fillStyle="#00FF00";var n,i=D(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;it.strokeRect(a.x,a.y,a.width,a.height);var r=e[a.cls]?e[a.cls].name:"unknown",h=(100*Number(a.score)).toFixed(2);it.fillText("".concat(a.cls,": ").concat(r,", ").concat(h," %"),a.x,a.y)}}catch(o){i.e(o)}finally{i.f()}}},Ft=function(t,e){if(st&&tt&&ht){st.clearRect(0,0,tt.width,tt.height);var n,i=D(t);try{var a=function(){var t=n.value;if("text"==(e[t.cls]?e[t.cls].name:"unknown")){var i=ht.getImageData(t.x,t.y,t.width,t.height);st.putImageData(i,t.x,t.y)}else{var a=It(t.cls,e);if(""!=a){var r=new Image;r.src=a,r.onload=function(){var e=t.x+t.width/2-r.width/2,n=t.y+t.height/2-r.height/2;st.drawImage(r,e,n)}}}};for(i.s();!(n=i.n()).done;)a()}catch(r){i.e(r)}finally{i.f()}}},Mt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;z&&it&&J&&ht&&(t=z,e=J,n=it,i=ht),t&&e&&n&&i&&(n.fillStyle="white",n.fillRect(0,0,t.width,t.height),i.fillStyle="white",i.fillRect(0,0,e.width,e.height)),gt([])},Bt=function(t,e){var n="".concat(t,"x").concat(e);if(Y!=n&&z&&it&&J&&ht&&tt&&st){var i=it.getImageData(0,0,z.width,z.height),a=ht.getImageData(0,0,J.width,J.height),r=st.getImageData(0,0,tt.width,tt.height),h=[t,e];z.width=h[0],z.height=h[1];var o=[t,e];J.width=o[0],J.height=o[1];var c=[t,e];tt.width=c[0],tt.height=c[1],Mt(),it.putImageData(i,0,0),ht.putImageData(a,0,0),st.putImageData(r,0,0),L(n)}};return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(s.Z,{container:!0,children:[(0,I.jsx)(c.Z,{position:"static",children:(0,I.jsxs)(j.Z,{children:[(0,I.jsx)(b.Z,{variant:"h6",children:"DegiThoth"}),(0,I.jsx)(Z.ZP,{title:"Menu",children:(0,I.jsx)(y.Z,{onClick:function(t){C(t.currentTarget)},children:(0,I.jsx)(m.Z,{style:{color:"white"}})})}),(0,I.jsxs)(x.Z,{anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){C(null)},children:[(0,I.jsxs)(p.Z,{onClick:function(){X(!B)},children:[(0,I.jsx)(b.Z,{variant:"inherit",children:"Display Detected"}),B?(0,I.jsx)(w.Z,{children:(0,I.jsx)(d.Z,{})}):null]}),(0,I.jsxs)(p.Z,{onClick:function(){Bt(500,500)},children:[(0,I.jsx)(b.Z,{variant:"inherit",children:"500x500"}),"500x500"==Y?(0,I.jsx)(w.Z,{children:(0,I.jsx)(d.Z,{})}):null]}),(0,I.jsxs)(p.Z,{onClick:function(){Bt(700,500)},children:[(0,I.jsx)(b.Z,{variant:"inherit",children:"700x500"}),"700x500"==Y?(0,I.jsx)(w.Z,{children:(0,I.jsx)(d.Z,{})}):null]})]}),(0,I.jsx)(Z.ZP,{title:"Brush",children:(0,I.jsx)(y.Z,{onClick:function(){R("brush")},children:(0,I.jsx)(u.Z,{style:{color:"brush"==P?"red":"white"}})})}),(0,I.jsx)(Z.ZP,{title:"Eraser",children:(0,I.jsx)(y.Z,{onClick:function(){R("eraser")},children:(0,I.jsx)(l.Z,{style:{color:"eraser"==P?"red":"white"}})})}),(0,I.jsx)(Z.ZP,{title:"Download Image file",children:(0,I.jsx)(y.Z,{onClick:function(){tt&&tt.toBlob((function(t){var e=URL.createObjectURL(t),n=document.createElement("a");n.download="diagram.png",n.href=e,n.click(),n.remove()}),"image/png")},children:(0,I.jsx)(v.Z,{style:{color:"white"}})})}),(0,I.jsx)(Z.ZP,{title:"Download pptx file",children:(0,I.jsx)(y.Z,{onClick:function(){!function(){var t,e=new k.Z,n=e.addSlide(),i=D(bt);try{for(i.s();!(t=i.n()).done;){var a=t.value;if("text"==(St[a.cls]?St[a.cls].name:"unknown")){if(ht){var r=document.createElement("canvas");r.width=a.width,r.height=a.height;var h=r.getContext("2d"),o=ht.getImageData(a.x,a.y,a.width,a.height);null===h||void 0===h||h.putImageData(o,0,0);var c=r.toDataURL(),s=a.x/100,u=a.y/100,l=a.width/100,d=a.height/100;n.addImage({data:c,x:s,y:u,w:l,h:d}),r.remove()}}else{var g=It(a.cls,St);if(""!=g){var f=(a.x+a.width/2-50)/100,w=(a.y+a.height/2-50)/100;n.addImage({path:g,x:f,y:w})}}}}catch(v){i.e(v)}finally{i.f()}e.writeFile()}()},children:(0,I.jsx)(g.Z,{style:{color:"white"}})})}),(0,I.jsx)(Z.ZP,{title:"https://github.com/n-fukuju/degithoth",children:(0,I.jsx)(y.Z,{href:"https://github.com/n-fukuju/degithoth",children:(0,I.jsx)(f.Z,{style:{color:"white"}})})})]})}),(0,I.jsx)(s.Z,{item:!0,xs:6,children:(0,I.jsxs)(s.Z,{container:!0,children:[(0,I.jsx)(s.Z,{item:!0,xs:12,children:(0,I.jsx)(b.Z,{variant:"caption",children:"Drawing Canvas"})}),(0,I.jsx)("canvas",{id:"canvas",width:"500",height:"500",onMouseDown:function(t){Dt(t.pageX,t.pageY)},onMouseMove:function(t){Ct(t.pageX,t.pageY)},onMouseUp:function(t){Tt()},onTouchStart:function(t){t.changedTouches.length>0&&Dt(t.changedTouches[0].pageX,t.changedTouches[0].pageY)},onTouchMove:function(t){t.changedTouches.length>0&&Ct(t.changedTouches[0].pageX,t.changedTouches[0].pageY)},onTouchEnd:function(t){Tt()},onTouchCancel:function(t){Tt()},style:{border:"1px solid black"}})]})}),(0,I.jsx)(s.Z,{item:!0,xs:6,children:(0,I.jsxs)(s.Z,{container:!0,children:[(0,I.jsx)(s.Z,{item:!0,xs:12,children:(0,I.jsx)(b.Z,{variant:"caption",children:"Result"})}),(0,I.jsx)("canvas",{id:"canvas2",width:"500",height:"500",style:{border:"1px solid black"}})]})})]})})}},5301:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2562)}])},914:function(){},5410:function(){},8628:function(){},5778:function(){},1601:function(){},7792:function(){},8963:function(){},3180:function(){},7687:function(){},5042:function(){}},function(t){t.O(0,[774,491,864,904,723,974,132,245,888,179],(function(){return e=5301,t(t.s=e);var e}));var e=t.O();_N_E=e}]);